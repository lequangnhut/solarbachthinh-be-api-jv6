<!-- Page Header Start -->
<div class="container-fluid page-header py-5 mb-5">
    <div class="container py-5">
        <h1 class="display-3 text-white mb-3 animated slideInDown">Xác nhận thông tin đơn hàng</h1>
        <nav aria-label="breadcrumb animated slideInDown">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a class="text-white" href="#!/trang-chu">Trang chủ</a></li>
                <li class="breadcrumb-item"><a class="text-white" href="#!/gio-hang">Giỏ hàng</a></li>
                <li class="breadcrumb-item">
                    <a class="text-white" href="#!/gio-hang/xac-nhan-thong-tin-don-hang">Kiểm tra thông tin</a>
                </li>
            </ol>
        </nav>
    </div>
</div>
<!-- Page Header End -->


<!-- Service Start -->
<div class="container-fluid bg-light overflow-hidden px-lg-0" style="margin: 6rem 0;">
    <section class="h-100" id="cart">
        <div class="container py-5">
            <div class="row d-flex justify-content-center my-4">
                <div class="col-md-7">
                    <div class="card mb-3">
                        <div class="card-header py-3 bg-white">
                            <h5 class="mb-0">Địa chỉ nhận hàng</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-floating mb-3">
                                <input type="text"
                                       id="full_name"
                                       class="form-control"
                                       placeholder="Họ và tên"
                                       ng-model="user.fullname"
                                >
                                <label for="full_name">Họ và tên</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="tel"
                                       id="phone"
                                       class="form-control"
                                       maxlength="10"
                                       placeholder="Số điện thoại"
                                       ng-model="user.phoneNumber"
                                >
                                <label for="phone">Số điện thoại</label>
                            </div>

                            <div class="form-floating mb-3">
                                <select class="form-select"
                                        id="city"
                                        ng-model="user.provinceName"
                                        aria-label="Floating label select example"
                                        ng-options="province.ProvinceName for province in ship_province track by province.ProvinceID"
                                        ng-change="getDistricts(user.provinceName)"
                                >
                                    <option value="" selected disabled>Chọn Tỉnh Thành / Thành Phố</option>
                                </select>
                                <label for="city">Tỉnh Thành</label>
                            </div>

                            <div class="form-floating mb-3">
                                <select class="form-select"
                                        id="district"
                                        ng-model="user.districtName"
                                        aria-label="Floating label select example"
                                        ng-options="districts.DistrictName for districts in ship_districts track by districts.DistrictID"
                                        ng-change="getWards(user.districtName)"
                                >
                                    <option value="" selected disabled>Chọn Quận/Huyện</option>
                                </select>
                                <label for="district">Quận/Huyện</label>
                            </div>

                            <div class="form-floating mb-3">
                                <select class="form-select"
                                        id="ward"
                                        ng-model="user.wardName"
                                        aria-label="Floating label select example"
                                        ng-options="ward.WardName for ward in ship_ward track by ward.WardCode"
                                        ng-change="onWardChange(user.wardName)"
                                >
                                    <option value="" selected disabled>Chọn Phường/Xã</option>
                                </select>

                                <label for="ward">Phường/Xã</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="text" ng-model="user.address"
                                       class="form-control"
                                       id="address"
                                       placeholder="Địa chỉ cụ thể"
                                >
                                <label for="address">Địa chỉ cụ thể</label>
                            </div>

                            <div class="form-floating mb-3">
                                <select class="form-select"
                                        id="service"
                                        ng-model="serviceName"
                                        aria-label="Floating label select example"
                                        ng-options="service.short_name for service in ship_services track by service.service_id"
                                        ng-change="calculateFee(serviceName)"
                                >
                                    <option value="" selected disabled>Chọn hình thức vận chuyển</option>
                                </select>
                                <label for="service">Hình thức vận chuyển</label>
                            </div>

                            <div class="form-floating">
                                    <textarea class="form-control" placeholder="Leave a comment here"
                                              id="noted" style="height: 100px" ng-model="noted">
                                    </textarea>
                                <label for="noted">Ghi chú</label>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-3">
                        <div class="card-body">
                            <p><strong>Thời gian dự kiến giao hàng</strong></p>
                            <span class="mb-0" ng-if="intend_time == null">
                                    Chưa xác định dạng thời gian dự kiến giao hàng
                                </span>
                            <span class="mb-0" ng-if="intend_time != null">
                                    {{intend_time | calculatePreviousDate:2}} -
                                </span>
                            <span class="mb-0" ng-if="intend_time != null">
                                    {{intend_time | timestampToDateString}}
                                </span>
                        </div>
                    </div>

                    <div class="card mb-3 mb-lg-0">
                        <div class="card-body  w-100">
                            <p class="d-flex justify-content-center align-items-center"
                               style="margin-right: 20px"><strong>Hoặc
                                thanh toán bằng</strong></p>
                            <div class="pay d-flex justify-content-center align-items-center">
                                <img class="me-2" width="45px"
                                     src="https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg"
                                     alt="Visa"/>
                                <img class="me-2" width="45px"
                                     src="https://i.gyazo.com/884ccd6cfb1e3587623a0815cd228aa2.png"
                                     alt="American Express"/>
                                <img class="me-2" width="45px"
                                     src="https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg"
                                     alt="Mastercard"/>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="col-md-5">
                    <div class="card mb-4">
                        <div class="card-header py-3 bg-white">
                            <h5 class="mb-0"><i class="fa-solid fa-tags"></i>&nbsp;Mã giảm giá</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <input type="text" class="form-control"
                                       placeholder="Mã ưu đãi"
                                       ng-model="discount_code"
                                >
                            </div>

                            <div class="row" ng-if="discountApplied && appliedDiscount !== null">
                                <div class="col-8 col-md-8 col-lg-9">
                                    <ul class="list-group list-group-flush ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{$index + 1}}. {{appliedDiscount.id}} -
                                            {{formatPrice(appliedDiscount.discountCost)}} ₫
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-dark">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            <a href="javascript:void(0)" ng-click="deleteDiscount()" role="button">
                                                xoá
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="go-to-pay w-100 d-flex justify-content-center align-items-center">
                                <button type="button" ng-click="load_discount()"
                                        class="btn btn-primary btn-lg text-center w-100">
                                    Áp dụng
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card mb-4" ng-controller="payment_controller">
                        <div class="card-header py-3 bg-white">
                            <h5 class="mb-0"><i class="fa-solid fa-tags"></i>&nbsp;
                                Đơn hàng của bạn - <span>{{quantity_cart}}</span> sản phẩm
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row" ng-repeat="cart in object_cart">
                                <div class="col-8 col-md-8 col-lg-9">
                                    <ul class="list-group list-group-flush ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{$index + 1}}. {{cart[1].productName}}
                                            <br>
                                            (Số lượng x{{cart[0].quantity}})
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-dark">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{formatPrice(cart[1].price)}} ₫
                                        </li>
                                    </ul>
                                </div>
                                <hr class="my-2"/>
                            </div>

                            <div class="row">
                                <div class="col-8 col-md-8 col-lg-9">
                                    <ul class="ps-0">
                                        Tạm tính:
                                        <li style="font-size: 14px; list-style: none"></li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-dark">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{formatPrice(subtotal)}} đ
                                        </li>
                                    </ul>
                                </div>

                                <div class="col-7 col-md-7 col-lg-9">
                                    <ul class="ps-0">
                                        Giảm giá:
                                        <li style="font-size: 14px; list-style: none"></li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-dark">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{formatPrice(discount)}} đ
                                        </li>
                                    </ul>
                                </div>

                                <div class="col-7 col-md-7 col-lg-9">
                                    <ul class="ps-0">
                                        Phí vận chuyển:
                                        <li style="font-size: 14px; list-style: none"></li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-dark">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{formatPrice(shippingFee)}} đ
                                        </li>
                                    </ul>
                                </div>

                                <div class="col-7 col-md-7 col-lg-9">
                                    <ul class="ps-0">
                                        Tổng tiền:
                                        <li style="font-size: 14px; list-style: none"></li>
                                    </ul>
                                </div>
                                <div class="col-5 col-md-5 col-lg-3 d-flex justify-content-end text-danger">
                                    <ul class="ps-0">
                                        <li style="font-size: 14px; list-style: none">
                                            {{formatPrice(total)}} đ
                                        </li>
                                    </ul>
                                </div>

                                <hr class="my-2"/>

                                <form name="paymentForm" ng-submit="payment_calculator()" novalidate>
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input type="radio"
                                                       class="form-check-input"
                                                       name="categoryPayment"
                                                       value="COD"
                                                       ng-model="paymentMethod"
                                                       ng-disabled="total > 10000000"
                                                       required
                                                >
                                                <span ng-if="total > 10000000">Thanh toán khi nhận hàng - không khả dụng</span>
                                                <span ng-if="total <= 10000000">Thanh toán khi nhận hàng.</span>
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input type="radio"
                                                       class="form-check-input"
                                                       name="categoryPayment"
                                                       value="TRANSFER"
                                                       ng-model="paymentMethod"
                                                       required
                                                >
                                                Thanh toán tiện lợi với ví VNPAY.
                                            </label>
                                        </div>
                                    </div>

                                    <div class="go-to-pay w-100 d-flex justify-content-center align-items-center">
                                        <button type="submit" ng-disabled="paymentForm.$invalid"
                                                class="btn btn-primary btn-lg btn-block text-center w-100">
                                            Đặt hàng
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<!-- Service End -->